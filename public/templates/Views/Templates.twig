{% extends "Base.twig" %}
{% set pageTitle = "CMSControl.Views.Templates.Title"| translate %}
{% set currentPage = 'admin/templates' %}


{% block Content %}
	<div class="row">
		<div class="col-xxl-12 mb-6 order-0 gy-2">
			<div class="card">
				<div class="card-header">
					<h5 class="card-title">{{ "CMSControl.Views.Templates.Title"| translate }}
						{% if HasWritePermission %}
							<a role="button" href="{{ generateLink("admin/templates/create") }}" class="btn btn-primary btn-sm float-end">
								<i class="fa-solid fa-plus"></i>
								{{ "CMSControl.Views.Templates.Card.Button.Create"| translate }}</a>
						{% endif %}
					</h5>

				</div>
				<div class="card-body">
					<table class="table table-sm">
						<thead>
							<tr>
								<th scope="col">#</th>
								<th scope="col">{{ "CMSControl.Views.Templates.Table.Column.Name"| translate }}</th>
								<th scope="col">{{ "CMSControl.Views.Templates.Table.Column.Slug"| translate }}</th>
								<th scope="col">{{ "CMSControl.Views.Templates.Table.Column.Layout"| translate }}</th>
								<th scope="col">{{ "CMSControl.Views.Templates.Table.Column.Author"| translate }}</th>
								<th scope="col"></th>
							</tr>
						</thead>
						<tbody>
							{% for Template in Templates %}
								<tr>
									<th scope="row">{{ Template.id }}</th>
									<td>{{ Template.name }}</td>
									<td>{{ Template.slug }}</td>
									<td>{{ Template.layout.name }}</td>
									<td>{{ getUserById(Template.author).getName()|default('???') }}</td>
									<td>
										<a role="button" href="{{ generateLink("admin/templates/"~ Template.id) }}" class="btn btn-sm btn-warning">
											<i class="fa-solid fa-pencil"></i>
											{{ "CMSControl.Views.Templates.Card.Button.Edit"| translate }}</a>
										<button data-action="delete" data-id="{{ Template.id }}" class="btn btn-sm btn-danger">
											<i class="fa-solid fa-trash"></i>
											{{ "CMSControl.Views.Templates.Card.Button.Delete"| translate }}</button>
									</td>
								</tr>
							{% endfor %}
						</tbody>
					</table>
				</div>
			</div>
		</div>
	</div>
{% endblock %}

{% block PageJs %}
	<script src="{{ includeResource("js/CMSControl/template.js") }}"></script>
{% endblock %}
